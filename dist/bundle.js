!function(t){var e={};function a(s){if(e[s])return e[s].exports;var i=e[s]={i:s,l:!1,exports:{}};return t[s].call(i.exports,i,i.exports,a),i.l=!0,i.exports}a.m=t,a.c=e,a.d=function(t,e,s){a.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:s})},a.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},a.t=function(t,e){if(1&e&&(t=a(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var s=Object.create(null);if(a.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)a.d(s,i,function(e){return t[e]}.bind(null,i));return s},a.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return a.d(e,"a",e),e},a.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},a.p="",a(a.s=0)}([function(t,e,a){"use strict";a.r(e);new class{constructor(){this.useLocalStorage=this.checkLocalStorage(),this.currentListIndex=1,this.currentTaskIndex=1,this.hasChanged=!1,this.settings={currentWorkspace:1,version:"1.0"},this.defaultWorkspace={id:1,title:"Workspace 1",lists:[this.listData(2,"My first list",[this.taskData("This is an active task!",!1,null),this.taskData("This is a completed task!",!0,this.getCurrentDate())])]},this.workspaces=[this.copyObject(this.defaultWorkspace)],this.workspaceIndex=0,this.workspace=null,this.autoSave=null,!0===this.useLocalStorage&&(null===localStorage.getItem("workspaces")||null===localStorage.getItem("settings")?(this.workspaces=this.localStorageSetup(),this.settings=JSON.parse(localStorage.getItem("settings")),this.updateWorkspaceDropdown()):(this.workspaces=this.getWorkspaces(),this.settings=this.getSettings(),this.updateWorkspaceDropdown()),this.autoSave=setInterval(function(t,e,a){t.hasChanged&&(console.log("auto-saving..."),t.setSettings(),t.workspace.lists=t.serializeLists(),t.workspaces[t.workspaceIndex]=t.workspace,t.setWorkspaces(),t.hasChanged=!1,console.log("Saving complete"))},3e4,this,this.settings,this.workspaces),this.loadWorkspace(this.settings.currentWorkspace)),this.bindEvents()}bindEvents(){var t=this;$("body").on("change",".todo-item:checkbox",function(){t.hasChanged=!0;var e=$(this).parent().parent().parent();$(this).is(":checked")?($(this).parent().parent().parent().addClass("checked"),$(this).parent().parent().find(".checkbox-label label").addClass("strikethrough"),t.completeTask(e.attr("data-listid"),e.attr("data-taskid"))):($(this).parent().parent().parent().removeClass("checked"),$(this).parent().parent().find(".checkbox-label label").removeClass("strikethrough"),t.unCompleteTask(e.attr("data-listid"),e.attr("data-taskid")))}),$("body").on("keyup",".todo-input",function(e){e||(e=window.event),"13"==(e.keyCode||e.which)&&(t.hasChanged=!0,t.addTask($(this).attr("data-listid"),$(this).val()),$(this).val(""))}),$("body").on("click",".task-delete",function(){t.hasChanged=!0,$(this).attr("data-listid"),$(this).attr("data-taskid"),$(this).parent().parent().remove()}),$("body").on("click","#workspace-list-create",function(){t.getListName()}),$("body").on("click","#workspaces-export",function(){var e={settings:t.settings,workspaces:t.workspaces},a="data:text/json;charset=utf-8,"+encodeURIComponent(JSON.stringify(e)),s=document.getElementById("export-element");s.setAttribute("href",a),s.setAttribute("download","todobackup.json"),s.click()}),$("body").on("click","#workspaces-import",function(){t.getImportData()}),$("body").on("click",".list-filter-todo",function(){var e=$(this).attr("data-listid");t.applyTodoFilter(e)}),$("body").on("click",".list-filter-completed",function(){var e=$(this).attr("data-listid");t.applyCompletedFilter(e)}),$("body").on("click",".list-filter-all",function(){var e=$(this).attr("data-listid");t.removeFilters(e)}),$("body").on("change","#workspace-selection",function(){console.log("Saving..."),t.setSettings(),t.workspace.lists=t.serializeLists(),t.workspaces[t.workspaceIndex]=t.workspace,t.setWorkspaces(),t.loadWorkspace($(this).val()),t.hasChanged=!0}),$("body").on("click","#workspace-create",function(){t.getWorkspaceName()}),$("body").on("click",".list-rename",function(){t.renameList($(this).attr("data-listid"))}),$("body").on("click",".list-clear",function(){t.clearList($(this).attr("data-listid"))}),$("body").on("click",".list-delete",function(){t.deleteList($(this).attr("data-listid"))}),$("body").on("click","#workspace-rename",function(){t.renameWorkspace(t.settings.currentWorkspace)}),$("body").on("click","#workspace-delete",function(){t.deleteWorkspace(t.settings.currentWorkspace)})}async getListName(){const{value:t}=await Swal.fire({title:"Enter New List Name",input:"text",inputValidator:t=>{if(t.length<3)return"List name must be at least three characters"},showCloseButton:!0,showCancelButton:!0,confirmButtonText:"Create List",confirmButtonAriaLabel:"Create List",cancelButtonAriaLabel:"Cancel",cancelButtonText:"Cancel",focusConfirm:!1});t&&(this.hasChanged=!0,this.addList(3,t))}async getWorkspaceName(){const{value:t}=await Swal.fire({title:"Enter New Workspace Name",input:"text",inputValidator:t=>{if(t.length<3)return"Workspace name must be at least three characters"},showCloseButton:!0,showCancelButton:!0,confirmButtonText:"Create Workspace",confirmButtonAriaLabel:"Create Workspace",cancelButtonAriaLabel:"Cancel",cancelButtonText:"Cancel",focusConfirm:!1});t&&(this.hasChanged=!0,this.createWorkspace(t))}async renameList(t){const{value:e}=await Swal.fire({title:"Enter New List Name",input:"text",inputValidator:t=>{if(t.length<3)return"List name must be at least three characters"},showCloseButton:!0,showCancelButton:!0,confirmButtonText:"Create List",confirmButtonAriaLabel:"Create List",cancelButtonAriaLabel:"Cancel",cancelButtonText:"Cancel",focusConfirm:!1});e&&(this.hasChanged=!0,$(".project-widget[data-listid='"+t+"']>header>h2").text(e))}async renameWorkspace(t){const{value:e}=await Swal.fire({title:"Enter New Workspace Name",input:"text",inputValidator:t=>{if(t.length<3)return"Workspace name must be at least three characters"},showCloseButton:!0,showCancelButton:!0,confirmButtonText:"Create Workspace",confirmButtonAriaLabel:"Create Workspace",cancelButtonAriaLabel:"Cancel",cancelButtonText:"Cancel",focusConfirm:!1});e&&(this.hasChanged=!0,this.workspace.title=e,this.workspaces[this.workspaceIndex]=this.workspace,this.updateWorkspaceDropdown())}async getImportData(){const{value:t}=await Swal.fire({title:"Importing Your Data",text:'Please paste the contents of your exported todobackup.json file below and click "OK"',input:"textarea",inputPlaceholder:"Paste your backup here",showCancelButton:!0});if(t){var e=JSON.parse(t);e.hasOwnProperty("settings")&&e.hasOwnProperty("workspaces")?(this.settings=e.settings,this.workspaces=e.workspaces,this.loadWorkspace(this.workspaces[0].id)):Swal.fire({type:"error",title:"Invalid Data",text:"Your backup does not appear to contain valid data or is formatted incorrectly. Please try again."})}}clearList(t){Swal.fire({title:"Clear list?",text:"This action cannot be undone!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"}).then(e=>{e.value&&(_this.hasChanged=!0,$(".todo-container[data-listid='"+t+"']").html(""))})}deleteList(t){Swal.fire({title:"Delete list?",text:"This action cannot be undone!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"}).then(e=>{e.value&&(_this.hasChanged=!0,$(".project-widget[data-listid='"+t+"']").parent().remove())})}deleteWorkspace(t){var e=this;this.workspaces.length>1?Swal.fire({title:"Delete workspace?",text:"This action cannot be undone!",type:"warning",showCancelButton:!0,confirmButtonColor:"#3085d6",cancelButtonColor:"#d33"}).then(a=>{if(a.value){e.hasChanged=!0;for(var s=0;s<e.workspaces.length;s++)e.workspaces[s].id==t&&(e.workspaces.splice(s,1),e.loadWorkspace(e.workspaces[0].id),e.updateWorkspaceDropdown())}}):Swal.fire({type:"error",title:"Unable to delete workspace",text:"This is your only workspace. You must create a new workspace before deleting this one."})}checkLocalStorage(){try{return localStorage.setItem("test","test"),localStorage.removeItem("test"),!0}catch(t){return!1}}localStorageSetup(){return localStorage.setItem("settings",JSON.stringify(this.settings)),localStorage.setItem("workspaces",JSON.stringify(this.workspaces)),JSON.parse(localStorage.getItem("workspaces"))}getSettings(){return this.useLocalStorage?JSON.parse(localStorage.getItem("settings")):this.settings}setSettings(){this.useLocalStorage&&localStorage.setItem("settings",JSON.stringify(this.settings))}getWorkspaces(){return this.useLocalStorage?JSON.parse(localStorage.getItem("workspaces")):this.workspaces}setWorkspaces(){this.useLocalStorage&&localStorage.setItem("workspaces",JSON.stringify(this.workspaces))}updateWorkspaceDropdown(){$("#workspace-selection option").remove();for(var t=0;t<this.workspaces.length;t++)this.workspaces[t].id==this.settings.currentWorkspace?$("#workspace-selection").append('<option value="'+this.workspaces[t].id+'" selected>'+this.workspaces[t].title+"</option>"):$("#workspace-selection").append('<option value="'+this.workspaces[t].id+'">'+this.workspaces[t].title+"</option>")}loadWorkspace(t){console.log("Loading workspace"),this.settings.currentWorkspace=t;for(var e=0;e<this.workspaces.length;e++)if(this.workspaces[e].id==t){this.currentTaskIndex=1,this.currentListIndex=1,this.workspaceIndex=e,this.workspace=this.workspaces[e],$(".list-container").html("");for(var a=0;a<this.workspace.lists.length;a++){var s=this.workspace.lists[a],i="";this.currentListIndex++;for(var o=0;o<s.tasks.length;o++){var r=this.workspace.lists[a].tasks[o];i=i.concat(this.taskHtml(a+1,o+1,r.text,r.checked,r.dateChecked)),this.currentTaskIndex++}$(".list-container[data-column="+s.column+"]").append(this.listHtml(a+1,s.title,i))}}var n=$(".list-group");for(e=0;e<$(n).length;e++)new Sortable($(n)[e],{animation:150,ghostClass:"bg-info"});var l=$(".list-container");for(e=0;e<$(l).length;e++)new Sortable($(l)[e],{animation:150,ghostClass:"bg-info",group:"shared"});console.log("Workspace loaded"),this.updateWorkspaceDropdown(),this.hasChanged=!0}addList(t,e){$(".list-container[data-column="+t+"]").append(this.listHtml(this.currentListIndex++,e))}addTask(t,e){$(".todo-container[data-listid="+t+"] .list-group").append(this.taskHtml(t,this.currentTaskIndex++,e,!1,null))}applyTodoFilter(t){$(".list-group-item[data-listid='"+t+"']:not(.checked)").show(),$(".list-group-item[data-listid='"+t+"'].checked").hide()}applyCompletedFilter(t){$(".list-group-item[data-listid='"+t+"']:not(.checked)").hide(),$(".list-group-item[data-listid='"+t+"'].checked").show()}removeFilters(t){$(".list-group-item[data-listid='"+t+"']:not(.checked)").show(),$(".list-group-item[data-listid='"+t+"'].checked").show()}createWorkspace(t){console.log("Creating workspace with name "+t);var e=this.copyObject(this.defaultWorkspace);e.title=t,e.id=this.workspaces.length+1,console.log("Saving..."),this.setSettings(),this.workspace.lists=this.serializeLists(),this.workspaces[this.workspaceIndex]=this.workspace,this.setWorkspaces(),this.workspaces.push(e),this.loadWorkspace(e.id),this.hasChanged=!0}listData(t,e,a){return{column:t,theme:"default",collapsed:!1,"sort-lock":!1,filter:"all",title:e,tasks:a=a||[]}}listHtml(t,e,a){return'<div class="row" style="margin-left: 0px; margin-right: 0px; margin-bottom: 30px;"><div class="project-widget" data-listid="'+t+'"><header role="heading"><h2>'+e+'</h2><div class="widget-controls"><div class="dropdown widget-options"><span class="dropdown-toggle" data-toggle="dropdown"><i class="fa fa-cog fa-2x"></i></span><ul class="dropdown-menu"><li><a class="list-filter-completed" href="#" data-listid="'+t+'">View Completed</a></li><li><a class="list-filter-todo" href="#" data-listid="'+t+'">View Todo</a></li><li><a class="list-filter-all" href="#" data-listid="'+t+'">View All</a></li><li role="separator" class="divider"></li><li><a class="list-rename" href="#" data-listid="'+t+'">Rename List</a></li><li><a class="list-clear" href="#" data-listid="'+t+'">Delete All Items</a></li><li><a class="list-delete" href="#" data-listid="'+t+'">Delete List</a></li></ul></div></div></header><div role="content"><div class="widget-content no-padding"><div class="form-group full-width"><input type="text" class="form-control todo-input" placeholder="Add New Task" data-listid="'+t+'"></div><div class="todo-container" data-listid="'+t+'"><ul class="list-group">'+(a=a||"")+"</ul></div></div></div></div></div>"}taskData(t,e,a){return{text:t,checked:e,dateChecked:a}}taskHtml(t,e,a,s,i){if(1==s){s="checked";var o="strikethrough"}else s="",o="",i="";return'<li class="todo-draggable list-group-item '+s+'" data-listid="'+t+'" data-taskid="'+e+'"><div class="task-action"><btn class="task-delete" data-listid="'+t+'" data-taskid="'+e+'"><i class="fa fa-times"></i></btn></div><div class="checkbox-wrapper"><div class="checkbox"><input type="checkbox" class="todo-item" '+s+'></div><div class="checkbox-label"><label class="'+o+'">'+a+'</label></div><div class="task-date">'+i+"</div></div></li>"}getCurrentDate(){var t=new Date,e=t.getDate(),a=t.getMonth()+1;return e<10&&(e="0"+e),a<10&&(a="0"+a),a+"/"+e+"/"+t.getFullYear()}completeTask(t,e){$(".list-group-item[data-listid="+t+"][data-taskId="+e+"]").find(".task-date").text(this.getCurrentDate())}unCompleteTask(t,e){$(".list-group-item[data-listid="+t+"][data-taskId="+e+"]").find(".task-date").text("")}serializeLists(){for(var t=[],e=1;e<=3;e++)$(".list-container[data-column='"+e+"'] .project-widget").each(function(a,s){var i={column:e,theme:"default",collapsed:!1,"sort-lock":!1,title:$(s).find("header>h2").text(),tasks:[]};$(s).find(".todo-container>.list-group>.list-group-item").each(function(t,e){i.tasks.push({text:$(e).find(".checkbox-label").text(),checked:$(e).find("input[type='checkbox']").prop("checked"),dateChecked:$(e).find(".task-date").text().length>0?$(e).find(".task-date").text():null})}),t.push(i)});return t}copyObject(t){return JSON.parse(JSON.stringify(t))}}}]);
//# sourceMappingURL=bundle.js.map